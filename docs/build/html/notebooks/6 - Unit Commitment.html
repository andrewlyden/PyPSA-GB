

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Unit Commitment &mdash; PyPSA-GB  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/nbsphinx-code-cells.css?v=2aa19091" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../_static/doctools.js?v=9a2dae69"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
      <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
      <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Comparison To Historical Data" href="9%20-%20Comparison%20To%20Historical%20Data.html" />
    <link rel="prev" title="LOPF using the Zonal Network" href="5d%20-%20Zonal%20Network.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            PyPSA-GB
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Data and Functionality</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="1%20-%20Network.html">Network</a></li>
<li class="toctree-l1"><a class="reference internal" href="1%20-%20Network.html#Zonal-model">Zonal model</a></li>
<li class="toctree-l1"><a class="reference internal" href="2%20-%20Demand.html">Demand</a></li>
<li class="toctree-l1"><a class="reference internal" href="3%20-%20Generator%20and%20Marginal%20Prices.html">Generator and Marginal Prices</a></li>
<li class="toctree-l1"><a class="reference internal" href="4%20-%20Renewable%20Power%20and%20Storage.html">Renewable Power and Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="5a%20-%20Historical%20Years.html">Historical Years</a></li>
<li class="toctree-l1"><a class="reference internal" href="5b%20-%20Future%20Years.html">Future Years</a></li>
<li class="toctree-l1"><a class="reference internal" href="5d%20-%20Zonal%20Network.html">LOPF using the Zonal Network</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Unit Commitment</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Setting-up-simulation">Setting up simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Running-MILP-and/or-LP">Running MILP and/or LP</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Outputs">Outputs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="9%20-%20Comparison%20To%20Historical%20Data.html">Comparison To Historical Data</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="7%20-%20Network%20Expansion.html">Network Expansion</a></li>
<li class="toctree-l1"><a class="reference internal" href="5c%20-%20Floating%20Wind%2C%20Marine%20and%20Emissions%20Modelling.html">Floating Wind &amp; Marine, and Emissions</a></li>
<li class="toctree-l1"><a class="reference internal" href="Scotland_Curtailment_2035.html">Curtailment in Scotland - 2035</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">PyPSA-GB</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Unit Commitment</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/notebooks/6 - Unit Commitment.nblink.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="Unit-Commitment">
<h1>Unit Commitment<a class="headerlink" href="#Unit-Commitment" title="Link to this heading"></a></h1>
<p>PyPSA-GB can model the GB power system by optimising the dispatch of generators by solving a Unit Commitment (UC) problem and fixing the commitment schedule. This notebook shows the solving of the Unit Commitment (UC) problem for a 3 day period.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">dotenv</span> <span class="kn">import</span> <span class="n">find_dotenv</span><span class="p">,</span> <span class="n">load_dotenv</span>

<span class="n">load_dotenv</span><span class="p">(</span><span class="n">find_dotenv</span><span class="p">())</span>
<span class="n">src_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;PROJECT_SRC&#39;</span><span class="p">)</span>
<span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">src_path</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pypsa</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s1">&#39;ggplot&#39;</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">data_reader_writer</span>
</pre></div>
</div>
</div>
<section id="Setting-up-simulation">
<h2>Setting up simulation<a class="headerlink" href="#Setting-up-simulation" title="Link to this heading"></a></h2>
<p>Set the required inputs for the unit commitment: the start, end and year of simulation, the timestep, and true/false on outputting marginal prices</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># attributes for running unit commitment</span>
<span class="n">start</span> <span class="o">=</span> <span class="s1">&#39;2050-06-02 00:00:00&#39;</span>
<span class="n">end</span> <span class="o">=</span> <span class="s1">&#39;2050-06-04 23:30:00&#39;</span>
<span class="c1"># year of simulation</span>
<span class="n">year</span> <span class="o">=</span> <span class="mi">2050</span>
<span class="c1"># time step as fraction of hour</span>
<span class="n">time_step</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="c1"># want marginal prices?</span>
<span class="n">marginal_price</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
</div>
<p>data_reader_writer is a script written to read in data from the various sources and write csv files in the format required for populating a PyPSA network object</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">year</span> <span class="o">&gt;</span> <span class="mi">2020</span><span class="p">:</span>

    <span class="c1"># choose FES scenario</span>
    <span class="n">scenario</span> <span class="o">=</span> <span class="s1">&#39;Leading The Way&#39;</span>
    <span class="c1"># scenario = &#39;Consumer Transformation&#39;</span>
    <span class="c1"># scenario = &#39;System Transformation&#39;</span>
    <span class="c1"># scenario = &#39;Steady Progression&#39;</span>

    <span class="n">year_baseline</span> <span class="o">=</span> <span class="mi">2012</span>

    <span class="n">data_reader_writer</span><span class="o">.</span><span class="n">data_writer</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">time_step</span><span class="p">,</span> <span class="n">year</span><span class="p">,</span> <span class="n">demand_dataset</span><span class="o">=</span><span class="s1">&#39;historical&#39;</span><span class="p">,</span> <span class="n">year_baseline</span><span class="o">=</span><span class="n">year_baseline</span><span class="p">,</span> <span class="n">scenario</span><span class="o">=</span><span class="n">scenario</span><span class="p">)</span>

<span class="k">elif</span> <span class="n">year</span> <span class="o">&lt;=</span> <span class="mi">2020</span><span class="p">:</span>
    <span class="n">data_reader_writer</span><span class="o">.</span><span class="n">data_writer</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">time_step</span><span class="p">,</span> <span class="n">year</span><span class="p">,</span> <span class="n">demand_dataset</span><span class="o">=</span><span class="s1">&#39;historical&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
c:\Users\alyden\Anaconda3\envs\PyPSA-GB\lib\site-packages\pandas\core\arrays\datetimes.py:741: PerformanceWarning: Non-vectorized DateOffset being applied to Series or DatetimeIndex
  warnings.warn(
c:\Users\alyden\Anaconda3\envs\PyPSA-GB\lib\site-packages\pandas\core\indexing.py:1667: PerformanceWarning: DataFrame is highly fragmented.  This is usually the result of calling `frame.insert` many times, which has poor performance.  Consider joining all columns at once using pd.concat(axis=1) instead.  To get a de-fragmented frame, use `newframe = frame.copy()`
  self.obj[key] = value
C:\Users\alyden\OneDrive - University of Edinburgh\Python\PyPSA-GB v0.0.1\PyPSA-GB\interconnectors.py:208: UserWarning: This pattern has match groups. To actually get the groups, use str.extract.
  df_FES = df_FES[~df_FES.Variable.str.contains(&#39;(TWh)&#39;)]
</pre></div></div>
</div>
<p>Initilise and prepare network…</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">network</span> <span class="o">=</span> <span class="n">pypsa</span><span class="o">.</span><span class="n">Network</span><span class="p">()</span>
<span class="n">network</span><span class="o">.</span><span class="n">import_from_csv_folder</span><span class="p">(</span><span class="s1">&#39;UC_data&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
WARNING:pypsa.io:
Importing PyPSA from older version of PyPSA than current version.
Please read the release notes at https://pypsa.readthedocs.io/en/latest/release_notes.html
carefully to prepare your network for import.
Currently used PyPSA version [0, 20, 1], imported network file PyPSA version None.

INFO:pypsa.components:Applying weightings to all columns of `snapshot_weightings`
WARNING:pypsa.io:Components Index([&#39;Bar-Bri-Cha&#39;, &#39;Big Rus&#39;, &#39;Bri-Cha-Min&#39;, &#39;Eas-Cas&#39;, &#39;Eas-Rai-Sou&#39;,
       &#39;Fai-Hea&#39;, &#39;Mor&#39;, &#39;NE-Jer&#39;, &#39;Nor-Ron-Fir&#39;, &#39;Pen-Fir-Dee&#39;, &#39;Pen-Fir-Sha&#39;,
       &#39;Rai-Isl&#39;, &#39;Ram-Isl&#39;, &#39;Sou-Jer&#39;, &#39;Sou-Min-Jer&#39;, &#39;Str-Lou&#39;, &#39;Tor-Hea&#39;,
       &#39;Wes-Cas&#39;, &#39;Wes-Fir&#39;],
      dtype=&#39;object&#39;, name=&#39;Generator&#39;) for attribute p_max_pu of Generator are not in main components dataframe generators
INFO:pypsa.io:Imported network UC_data has buses, generators, links, loads, storage_units
</pre></div></div>
</div>
</section>
<section id="Running-MILP-and/or-LP">
<h2>Running MILP and/or LP<a class="headerlink" href="#Running-MILP-and/or-LP" title="Link to this heading"></a></h2>
<p>The below cell runs the unit commitment. If marginal prices are not required then one MILP optimisation step is needed. If marginal prices are required then the MILP step is followed by fixing the generator status to convert to a LP which when solved gives marginal prices.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">marginal_price</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>

    <span class="n">network</span><span class="o">.</span><span class="n">lopf</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">snapshots</span><span class="p">,</span> <span class="n">solver_name</span><span class="o">=</span><span class="s2">&quot;gurobi&quot;</span><span class="p">)</span>

<span class="k">elif</span> <span class="n">marginal_price</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>

    <span class="c1"># Build a pyomo model corresponding to the pypsa network</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">pypsa</span><span class="o">.</span><span class="n">opf</span><span class="o">.</span><span class="n">network_lopf_build_model</span><span class="p">(</span>
        <span class="n">network</span><span class="p">,</span> <span class="n">network</span><span class="o">.</span><span class="n">snapshots</span><span class="p">)</span>
    <span class="c1"># Prepare a pyomo optimizer object, here with gurobi</span>
    <span class="n">opt</span> <span class="o">=</span> <span class="n">pypsa</span><span class="o">.</span><span class="n">opf</span><span class="o">.</span><span class="n">network_lopf_prepare_solver</span><span class="p">(</span>
        <span class="n">network</span><span class="p">,</span> <span class="n">solver_name</span><span class="o">=</span><span class="s2">&quot;gurobi&quot;</span><span class="p">)</span>
    <span class="c1"># solve the MILP</span>
    <span class="n">opt</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">model</span><span class="p">)</span><span class="o">.</span><span class="n">write</span><span class="p">()</span>
    <span class="c1"># fixing the generator_status makes the problem linear (LP)</span>
    <span class="n">model</span><span class="o">.</span><span class="n">generator_status</span><span class="o">.</span><span class="n">fix</span><span class="p">()</span>
    <span class="c1"># solve again with fixed generators</span>
    <span class="n">network</span><span class="o">.</span><span class="n">results</span> <span class="o">=</span> <span class="n">opt</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
    <span class="n">network</span><span class="o">.</span><span class="n">results</span><span class="o">.</span><span class="n">write</span><span class="p">()</span>
    <span class="c1"># import back to pypsa datastructures</span>
    <span class="n">pypsa</span><span class="o">.</span><span class="n">opf</span><span class="o">.</span><span class="n">extract_optimisation_results</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">network</span><span class="o">.</span><span class="n">snapshots</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO:pypsa.opf:Performed preliminary steps
INFO:pypsa.opf:Building pyomo model using `angles` formulation
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
# ==========================================================
# = Solver Results                                         =
# ==========================================================
# ----------------------------------------------------------
#   Problem Information
# ----------------------------------------------------------
Problem:
- Name: x226297
  Lower bound: 30914790.45505966
  Upper bound: 30917747.46757312
  Number of objectives: 1
  Number of constraints: 446419
  Number of variables: 226297
  Number of binary variables: 18288
  Number of integer variables: 18288
  Number of continuous variables: 208009
  Number of nonzeros: 1228054
  Sense: minimize
# ----------------------------------------------------------
#   Solver Information
# ----------------------------------------------------------
Solver:
- Status: ok
  Return code: 0
  Message: Model was solved to optimality (subject to tolerances), and an optimal solution is available.
  Termination condition: optimal
  Termination message: Model was solved to optimality (subject to tolerances), and an optimal solution is available.
  Wall time: 8.473834991455078
  Error rc: 0
  Time: 11.226973533630371
# ----------------------------------------------------------
#   Solution Information
# ----------------------------------------------------------
Solution:
- number of solutions: 0
  number of solutions displayed: 0
# ==========================================================
# = Solver Results                                         =
# ==========================================================
# ----------------------------------------------------------
#   Problem Information
# ----------------------------------------------------------
Problem:
- Name: x226297_copy
  Lower bound: 30917747.467573464
  Upper bound: 30917747.467573464
  Number of objectives: 1
  Number of constraints: 446419
  Number of variables: 208009
  Number of binary variables: 0
  Number of integer variables: 0
  Number of continuous variables: 208009
  Number of nonzeros: 966118
  Sense: minimize
# ----------------------------------------------------------
#   Solver Information
# ----------------------------------------------------------
Solver:
- Status: ok
  Return code: 0
  Message: Model was solved to optimality (subject to tolerances), and an optimal solution is available.
  Termination condition: optimal
  Termination message: Model was solved to optimality (subject to tolerances), and an optimal solution is available.
  Wall time: 0.6509914398193359
  Error rc: 0
  Time: 3.783301830291748
# ----------------------------------------------------------
#   Solution Information
# ----------------------------------------------------------
Solution:
- number of solutions: 0
  number of solutions displayed: 0
</pre></div></div>
</div>
</section>
<section id="Outputs">
<h2>Outputs<a class="headerlink" href="#Outputs" title="Link to this heading"></a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># can now see marginal prices</span>
<span class="n">network</span><span class="o">.</span><span class="n">buses_t</span><span class="o">.</span><span class="n">marginal_price</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>Bus</th>
      <th>bus</th>
      <th>Netherlands</th>
      <th>Norway</th>
      <th>N. Ireland</th>
      <th>France2</th>
      <th>Belgium</th>
      <th>Ireland</th>
      <th>Germany</th>
      <th>Ireland2</th>
      <th>France1</th>
      <th>Denmark</th>
    </tr>
    <tr>
      <th>snapshot</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2050-06-02 00:00:00</th>
      <td>80.0</td>
      <td>60.0</td>
      <td>79.0</td>
      <td>73.0</td>
      <td>65.0</td>
      <td>60.0</td>
      <td>73.0</td>
      <td>60.0</td>
      <td>73.0</td>
      <td>65.0</td>
      <td>73.0</td>
    </tr>
    <tr>
      <th>2050-06-02 01:00:00</th>
      <td>80.0</td>
      <td>60.0</td>
      <td>79.0</td>
      <td>73.0</td>
      <td>65.0</td>
      <td>60.0</td>
      <td>73.0</td>
      <td>60.0</td>
      <td>73.0</td>
      <td>65.0</td>
      <td>73.0</td>
    </tr>
    <tr>
      <th>2050-06-02 02:00:00</th>
      <td>80.0</td>
      <td>60.0</td>
      <td>79.0</td>
      <td>73.0</td>
      <td>65.0</td>
      <td>60.0</td>
      <td>73.0</td>
      <td>60.0</td>
      <td>73.0</td>
      <td>65.0</td>
      <td>73.0</td>
    </tr>
    <tr>
      <th>2050-06-02 03:00:00</th>
      <td>80.0</td>
      <td>60.0</td>
      <td>79.0</td>
      <td>73.0</td>
      <td>65.0</td>
      <td>60.0</td>
      <td>73.0</td>
      <td>60.0</td>
      <td>73.0</td>
      <td>65.0</td>
      <td>73.0</td>
    </tr>
    <tr>
      <th>2050-06-02 04:00:00</th>
      <td>80.0</td>
      <td>60.0</td>
      <td>79.0</td>
      <td>73.0</td>
      <td>65.0</td>
      <td>60.0</td>
      <td>73.0</td>
      <td>60.0</td>
      <td>73.0</td>
      <td>65.0</td>
      <td>73.0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2050-06-04 19:00:00</th>
      <td>0.0</td>
      <td>-20.0</td>
      <td>-1.0</td>
      <td>-7.0</td>
      <td>-15.0</td>
      <td>-20.0</td>
      <td>-7.0</td>
      <td>-20.0</td>
      <td>-7.0</td>
      <td>-15.0</td>
      <td>-7.0</td>
    </tr>
    <tr>
      <th>2050-06-04 20:00:00</th>
      <td>80.0</td>
      <td>60.0</td>
      <td>79.0</td>
      <td>73.0</td>
      <td>65.0</td>
      <td>60.0</td>
      <td>73.0</td>
      <td>60.0</td>
      <td>73.0</td>
      <td>65.0</td>
      <td>73.0</td>
    </tr>
    <tr>
      <th>2050-06-04 21:00:00</th>
      <td>80.0</td>
      <td>60.0</td>
      <td>79.0</td>
      <td>73.0</td>
      <td>65.0</td>
      <td>60.0</td>
      <td>73.0</td>
      <td>60.0</td>
      <td>73.0</td>
      <td>65.0</td>
      <td>73.0</td>
    </tr>
    <tr>
      <th>2050-06-04 22:00:00</th>
      <td>80.0</td>
      <td>60.0</td>
      <td>79.0</td>
      <td>73.0</td>
      <td>65.0</td>
      <td>60.0</td>
      <td>73.0</td>
      <td>60.0</td>
      <td>73.0</td>
      <td>65.0</td>
      <td>73.0</td>
    </tr>
    <tr>
      <th>2050-06-04 23:00:00</th>
      <td>80.0</td>
      <td>60.0</td>
      <td>79.0</td>
      <td>73.0</td>
      <td>65.0</td>
      <td>60.0</td>
      <td>73.0</td>
      <td>60.0</td>
      <td>73.0</td>
      <td>65.0</td>
      <td>73.0</td>
    </tr>
  </tbody>
</table>
<p>72 rows × 11 columns</p>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">network</span><span class="o">.</span><span class="n">generators_t</span><span class="o">.</span><span class="n">status</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>Generator</th>
      <th>West Burton</th>
      <th>Hywind Scotland Pilot Park (Hywind 2) Demonstrator</th>
      <th>Beatrice Demonstrator</th>
      <th>Burbo Bank</th>
      <th>Gunfleet Sands - (Demo) Extension</th>
      <th>Gunfleet Sands II</th>
      <th>Gunfleet Sands Offshore Wind Scheme</th>
      <th>Inner Dowsing</th>
      <th>Kentish Flats</th>
      <th>Lynn</th>
      <th>...</th>
      <th>Pem-Dem</th>
      <th>Pen</th>
      <th>Sca</th>
      <th>St-Mar</th>
      <th>Tir</th>
      <th>Wav-Hub</th>
      <th>Wes-Heb</th>
      <th>Wes-Lew</th>
      <th>Wes-Ork</th>
      <th>Unmet Load</th>
    </tr>
    <tr>
      <th>snapshot</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2050-06-02 00:00:00</th>
      <td>0.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>...</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>2050-06-02 01:00:00</th>
      <td>0.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>...</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>2050-06-02 02:00:00</th>
      <td>0.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>...</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>2050-06-02 03:00:00</th>
      <td>0.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>...</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>2050-06-02 04:00:00</th>
      <td>0.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>...</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2050-06-04 19:00:00</th>
      <td>0.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>...</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>2050-06-04 20:00:00</th>
      <td>0.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>...</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>2050-06-04 21:00:00</th>
      <td>0.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>...</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>2050-06-04 22:00:00</th>
      <td>0.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>...</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>2050-06-04 23:00:00</th>
      <td>0.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>...</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
    </tr>
  </tbody>
</table>
<p>72 rows × 2438 columns</p>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">network</span><span class="o">.</span><span class="n">generators_t</span><span class="o">.</span><span class="n">p</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>Generator</th>
      <th>West Burton</th>
      <th>Hywind Scotland Pilot Park (Hywind 2) Demonstrator</th>
      <th>Beatrice Demonstrator</th>
      <th>Burbo Bank</th>
      <th>Gunfleet Sands - (Demo) Extension</th>
      <th>Gunfleet Sands II</th>
      <th>Gunfleet Sands Offshore Wind Scheme</th>
      <th>Inner Dowsing</th>
      <th>Kentish Flats</th>
      <th>Lynn</th>
      <th>...</th>
      <th>Pem-Dem</th>
      <th>Pen</th>
      <th>Sca</th>
      <th>St-Mar</th>
      <th>Tir</th>
      <th>Wav-Hub</th>
      <th>Wes-Heb</th>
      <th>Wes-Lew</th>
      <th>Wes-Ork</th>
      <th>Unmet Load</th>
    </tr>
    <tr>
      <th>snapshot</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2050-06-02 00:00:00</th>
      <td>0.0</td>
      <td>32.489724</td>
      <td>8.220102</td>
      <td>0.000000</td>
      <td>2.311253</td>
      <td>15.092391</td>
      <td>25.153986</td>
      <td>0.363795</td>
      <td>22.524189</td>
      <td>0.363795</td>
      <td>...</td>
      <td>0.0</td>
      <td>29.69967</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2050-06-02 01:00:00</th>
      <td>0.0</td>
      <td>29.000530</td>
      <td>7.613872</td>
      <td>0.000000</td>
      <td>2.155259</td>
      <td>14.056046</td>
      <td>23.426743</td>
      <td>0.226243</td>
      <td>21.011899</td>
      <td>0.226243</td>
      <td>...</td>
      <td>0.0</td>
      <td>29.69967</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2050-06-02 02:00:00</th>
      <td>0.0</td>
      <td>24.166550</td>
      <td>6.658646</td>
      <td>0.059315</td>
      <td>2.060716</td>
      <td>13.423823</td>
      <td>22.373038</td>
      <td>0.230147</td>
      <td>19.608024</td>
      <td>0.230147</td>
      <td>...</td>
      <td>0.0</td>
      <td>16.85600</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2050-06-02 03:00:00</th>
      <td>0.0</td>
      <td>19.649024</td>
      <td>5.466987</td>
      <td>0.340611</td>
      <td>1.951811</td>
      <td>12.695556</td>
      <td>21.159260</td>
      <td>0.483038</td>
      <td>18.247211</td>
      <td>0.483038</td>
      <td>...</td>
      <td>0.0</td>
      <td>16.85600</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2050-06-02 04:00:00</th>
      <td>0.0</td>
      <td>19.148486</td>
      <td>5.200978</td>
      <td>3.401900</td>
      <td>1.979623</td>
      <td>12.881544</td>
      <td>21.469240</td>
      <td>3.018009</td>
      <td>19.284514</td>
      <td>3.018009</td>
      <td>...</td>
      <td>0.0</td>
      <td>16.85600</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2050-06-04 19:00:00</th>
      <td>0.0</td>
      <td>26.909923</td>
      <td>5.896873</td>
      <td>0.175997</td>
      <td>2.503677</td>
      <td>16.385975</td>
      <td>27.309958</td>
      <td>22.175462</td>
      <td>12.943438</td>
      <td>22.175462</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.00000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2050-06-04 20:00:00</th>
      <td>0.0</td>
      <td>23.656100</td>
      <td>4.976056</td>
      <td>0.011233</td>
      <td>2.043156</td>
      <td>13.306395</td>
      <td>22.177326</td>
      <td>3.116960</td>
      <td>9.719792</td>
      <td>3.116960</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.00000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2050-06-04 21:00:00</th>
      <td>0.0</td>
      <td>20.524212</td>
      <td>4.096106</td>
      <td>0.000000</td>
      <td>1.012580</td>
      <td>6.187433</td>
      <td>10.312389</td>
      <td>0.000000</td>
      <td>3.309329</td>
      <td>0.000000</td>
      <td>...</td>
      <td>0.0</td>
      <td>8.42800</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2050-06-04 22:00:00</th>
      <td>0.0</td>
      <td>8.880881</td>
      <td>2.255336</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.136623</td>
      <td>0.227705</td>
      <td>0.000000</td>
      <td>0.030324</td>
      <td>0.000000</td>
      <td>...</td>
      <td>0.0</td>
      <td>8.42800</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2050-06-04 23:00:00</th>
      <td>0.0</td>
      <td>5.312459</td>
      <td>1.834987</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.010380</td>
      <td>0.017299</td>
      <td>4.750807</td>
      <td>0.000000</td>
      <td>4.750807</td>
      <td>...</td>
      <td>0.0</td>
      <td>8.42800</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
<p>72 rows × 2438 columns</p>
</div></div>
</div>
<p>Group the generators by the carrier, and print their summed power outputs over the simulation period.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p_by_carrier</span> <span class="o">=</span> <span class="n">network</span><span class="o">.</span><span class="n">generators_t</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span>
    <span class="n">network</span><span class="o">.</span><span class="n">generators</span><span class="o">.</span><span class="n">carrier</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>

<span class="n">storage_by_carrier</span> <span class="o">=</span> <span class="n">network</span><span class="o">.</span><span class="n">storage_units_t</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span>
    <span class="n">network</span><span class="o">.</span><span class="n">storage_units</span><span class="o">.</span><span class="n">carrier</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>

<span class="c1"># to show on graph set the negative storage values to zero</span>
<span class="n">storage_by_carrier</span><span class="p">[</span><span class="n">storage_by_carrier</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">p_by_carrier</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">p_by_carrier</span><span class="p">,</span> <span class="n">storage_by_carrier</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="k">if</span> <span class="n">year</span> <span class="o">&lt;=</span> <span class="mi">2020</span><span class="p">:</span>

    <span class="c1"># interconnector exports</span>
    <span class="n">exports</span> <span class="o">=</span> <span class="n">network</span><span class="o">.</span><span class="n">loads_t</span><span class="o">.</span><span class="n">p</span>
    <span class="c1"># multiply by negative one to convert it as a generator</span>
    <span class="c1"># i.e. export is a positive load, but negative generator</span>
    <span class="n">exports</span><span class="p">[</span><span class="s1">&#39;Interconnectors Export&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">exports</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="o">-</span><span class="mi">6</span><span class="p">:]</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span>
    <span class="n">interconnector_export</span> <span class="o">=</span> <span class="n">exports</span><span class="p">[[</span><span class="s1">&#39;Interconnectors Export&#39;</span><span class="p">]]</span>

<span class="k">elif</span> <span class="n">year</span> <span class="o">&gt;</span> <span class="mi">2020</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">links_t</span><span class="o">.</span><span class="n">p0</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">links_t</span><span class="o">.</span><span class="n">p1</span><span class="p">)</span>
    <span class="n">imp</span> <span class="o">=</span> <span class="n">network</span><span class="o">.</span><span class="n">links_t</span><span class="o">.</span><span class="n">p0</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">imp</span><span class="p">[</span><span class="n">imp</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">imp</span><span class="p">[</span><span class="s1">&#39;Interconnectors Import&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">imp</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">interconnector_import</span> <span class="o">=</span> <span class="n">imp</span><span class="p">[[</span><span class="s1">&#39;Interconnectors Import&#39;</span><span class="p">]]</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">interconnector_import</span><span class="p">)</span>
    <span class="n">p_by_carrier</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">p_by_carrier</span><span class="p">,</span> <span class="n">interconnector_import</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

    <span class="n">exp</span> <span class="o">=</span> <span class="n">network</span><span class="o">.</span><span class="n">links_t</span><span class="o">.</span><span class="n">p0</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">exp</span><span class="p">[</span><span class="n">exp</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">exp</span><span class="p">[</span><span class="s1">&#39;Interconnectors Export&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">exp</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">interconnector_export</span> <span class="o">=</span> <span class="n">exp</span><span class="p">[[</span><span class="s1">&#39;Interconnectors Export&#39;</span><span class="p">]]</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">interconnector_export</span><span class="p">)</span>

<span class="c1"># group biomass stuff</span>
<span class="n">p_by_carrier</span><span class="p">[</span><span class="s1">&#39;Biomass&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">p_by_carrier</span><span class="p">[</span><span class="s1">&#39;Biomass (dedicated)&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">p_by_carrier</span><span class="p">[</span><span class="s1">&#39;Biomass (co-firing)&#39;</span><span class="p">])</span>

<span class="c1"># rename the hydro and interconnector import</span>
<span class="n">p_by_carrier</span> <span class="o">=</span> <span class="n">p_by_carrier</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span>
    <span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Large Hydro&#39;</span><span class="p">:</span> <span class="s1">&#39;Hydro&#39;</span><span class="p">})</span>
<span class="n">p_by_carrier</span> <span class="o">=</span> <span class="n">p_by_carrier</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span>
    <span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Interconnector&#39;</span><span class="p">:</span> <span class="s1">&#39;Interconnectors Import&#39;</span><span class="p">})</span>

<span class="n">p_by_carrier</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Link                 BritNed  EastWest  Moyle  Nemo     IFA    IFA2     NSL  \
snapshot
2050-06-02 00:00:00      0.0       0.0    0.0   0.0 -3500.0  1750.0 -2450.0
2050-06-02 01:00:00      0.0       0.0    0.0   0.0  -700.0  1750.0  2450.0
2050-06-02 02:00:00      0.0       0.0    0.0   0.0   700.0  1750.0 -2450.0
2050-06-02 03:00:00      0.0       0.0    0.0   0.0  -700.0  1750.0  2450.0
2050-06-02 04:00:00      0.0       0.0    0.0   0.0  3500.0  1750.0 -2450.0
...                      ...       ...    ...   ...     ...     ...     ...
2050-06-04 19:00:00      0.0       0.0    0.0   0.0   700.0  1750.0 -2450.0
2050-06-04 20:00:00      0.0       0.0    0.0   0.0 -3500.0  1750.0 -2450.0
2050-06-04 21:00:00      0.0       0.0    0.0   0.0  3500.0  1750.0  2450.0
2050-06-04 22:00:00      0.0       0.0    0.0   0.0   700.0  1750.0 -2450.0
2050-06-04 23:00:00      0.0       0.0    0.0   0.0  3500.0  1750.0 -2450.0

Link                 ElecLink  Viking Link  Greenlink  GridLink  NeuConnect  \
snapshot
2050-06-02 00:00:00    1750.0          0.0        0.0    1750.0         0.0
2050-06-02 01:00:00   -1750.0          0.0        0.0    2450.0         0.0
2050-06-02 02:00:00    1750.0          0.0        0.0   -2450.0         0.0
2050-06-02 03:00:00   -1750.0          0.0        0.0    2450.0         0.0
2050-06-02 04:00:00   -1750.0          0.0        0.0   -1750.0         0.0
...                       ...          ...        ...       ...         ...
2050-06-04 19:00:00    1750.0          0.0        0.0   -2450.0         0.0
2050-06-04 20:00:00    1750.0          0.0        0.0    1750.0         0.0
2050-06-04 21:00:00   -1750.0          0.0        0.0   -1750.0         0.0
2050-06-04 22:00:00    1750.0          0.0        0.0   -2450.0         0.0
2050-06-04 23:00:00   -1750.0          0.0        0.0   -1750.0         0.0

Link                 NorthConnect  FAB Link
snapshot
2050-06-02 00:00:00        2450.0   -1750.0
2050-06-02 01:00:00       -2450.0   -1750.0
2050-06-02 02:00:00        2450.0   -1750.0
2050-06-02 03:00:00       -2450.0   -1750.0
2050-06-02 04:00:00        2450.0   -1750.0
...                           ...       ...
2050-06-04 19:00:00        2450.0   -1750.0
2050-06-04 20:00:00        2450.0   -1750.0
2050-06-04 21:00:00       -2450.0   -1750.0
2050-06-04 22:00:00        2450.0   -1750.0
2050-06-04 23:00:00        2450.0   -1750.0

[72 rows x 14 columns]
Link                 BritNed  EastWest  Moyle  Nemo     IFA    IFA2     NSL  \
snapshot
2050-06-02 00:00:00     -0.0      -0.0   -0.0  -0.0  3500.0 -1750.0  2450.0
2050-06-02 01:00:00     -0.0      -0.0   -0.0  -0.0   700.0 -1750.0 -2450.0
2050-06-02 02:00:00     -0.0      -0.0   -0.0  -0.0  -700.0 -1750.0  2450.0
2050-06-02 03:00:00     -0.0      -0.0   -0.0  -0.0   700.0 -1750.0 -2450.0
2050-06-02 04:00:00     -0.0      -0.0   -0.0  -0.0 -3500.0 -1750.0  2450.0
...                      ...       ...    ...   ...     ...     ...     ...
2050-06-04 19:00:00     -0.0      -0.0   -0.0  -0.0  -700.0 -1750.0  2450.0
2050-06-04 20:00:00     -0.0      -0.0   -0.0  -0.0  3500.0 -1750.0  2450.0
2050-06-04 21:00:00     -0.0      -0.0   -0.0  -0.0 -3500.0 -1750.0 -2450.0
2050-06-04 22:00:00     -0.0      -0.0   -0.0  -0.0  -700.0 -1750.0  2450.0
2050-06-04 23:00:00     -0.0      -0.0   -0.0  -0.0 -3500.0 -1750.0  2450.0

Link                 ElecLink  Viking Link  Greenlink  GridLink  NeuConnect  \
snapshot
2050-06-02 00:00:00   -1750.0         -0.0       -0.0   -1750.0        -0.0
2050-06-02 01:00:00    1750.0         -0.0       -0.0   -2450.0        -0.0
2050-06-02 02:00:00   -1750.0         -0.0       -0.0    2450.0        -0.0
2050-06-02 03:00:00    1750.0         -0.0       -0.0   -2450.0        -0.0
2050-06-02 04:00:00    1750.0         -0.0       -0.0    1750.0        -0.0
...                       ...          ...        ...       ...         ...
2050-06-04 19:00:00   -1750.0         -0.0       -0.0    2450.0        -0.0
2050-06-04 20:00:00   -1750.0         -0.0       -0.0   -1750.0        -0.0
2050-06-04 21:00:00    1750.0         -0.0       -0.0    1750.0        -0.0
2050-06-04 22:00:00   -1750.0         -0.0       -0.0    2450.0        -0.0
2050-06-04 23:00:00    1750.0         -0.0       -0.0    1750.0        -0.0

Link                 NorthConnect  FAB Link
snapshot
2050-06-02 00:00:00       -2450.0    1750.0
2050-06-02 01:00:00        2450.0    1750.0
2050-06-02 02:00:00       -2450.0    1750.0
2050-06-02 03:00:00        2450.0    1750.0
2050-06-02 04:00:00       -2450.0    1750.0
...                           ...       ...
2050-06-04 19:00:00       -2450.0    1750.0
2050-06-04 20:00:00       -2450.0    1750.0
2050-06-04 21:00:00        2450.0    1750.0
2050-06-04 22:00:00       -2450.0    1750.0
2050-06-04 23:00:00       -2450.0    1750.0

[72 rows x 14 columns]
Link                 Interconnectors Import
snapshot
2050-06-02 00:00:00                  7700.0
2050-06-02 01:00:00                  6650.0
2050-06-02 02:00:00                  6650.0
2050-06-02 03:00:00                  6650.0
2050-06-02 04:00:00                  7700.0
...                                     ...
2050-06-04 19:00:00                  6650.0
2050-06-04 20:00:00                  7700.0
2050-06-04 21:00:00                  7700.0
2050-06-04 22:00:00                  6650.0
2050-06-04 23:00:00                  7700.0

[72 rows x 1 columns]
Link                 Interconnectors Export
snapshot
2050-06-02 00:00:00                 -7700.0
2050-06-02 01:00:00                 -6650.0
2050-06-02 02:00:00                 -6650.0
2050-06-02 03:00:00                 -6650.0
2050-06-02 04:00:00                 -7700.0
...                                     ...
2050-06-04 19:00:00                 -6650.0
2050-06-04 20:00:00                 -7700.0
2050-06-04 21:00:00                 -7700.0
2050-06-04 22:00:00                 -6650.0
2050-06-04 23:00:00                 -7700.0

[72 rows x 1 columns]
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Biomass (co-firing)</th>
      <th>Biomass (dedicated)</th>
      <th>CCS Biomass</th>
      <th>CCS Gas</th>
      <th>Coal</th>
      <th>Hydrogen</th>
      <th>Hydro</th>
      <th>Natural Gas</th>
      <th>Nuclear</th>
      <th>Oil</th>
      <th>...</th>
      <th>Waste</th>
      <th>Wave power</th>
      <th>Wind Offshore</th>
      <th>Wind Onshore</th>
      <th>Battery</th>
      <th>Compressed Air</th>
      <th>Liquid Air</th>
      <th>Pumped Storage Hydroelectric</th>
      <th>Interconnectors Import</th>
      <th>Biomass</th>
    </tr>
    <tr>
      <th>snapshot</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2050-06-02 00:00:00</th>
      <td>79.424</td>
      <td>401.87376</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>13533.310000</td>
      <td>63.957969</td>
      <td>0.0</td>
      <td>3973.4119</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>39.55567</td>
      <td>27738.299957</td>
      <td>1883.604239</td>
      <td>0.000000</td>
      <td>4372.349997</td>
      <td>0.000000</td>
      <td>4188.880198</td>
      <td>7700.0</td>
      <td>481.29776</td>
    </tr>
    <tr>
      <th>2050-06-02 01:00:00</th>
      <td>79.424</td>
      <td>401.87376</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>13533.310000</td>
      <td>63.957969</td>
      <td>0.0</td>
      <td>3973.4119</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>39.55567</td>
      <td>27718.638328</td>
      <td>2092.930363</td>
      <td>0.000000</td>
      <td>132.949592</td>
      <td>2116.224736</td>
      <td>4799.900000</td>
      <td>6650.0</td>
      <td>481.29776</td>
    </tr>
    <tr>
      <th>2050-06-02 02:00:00</th>
      <td>79.424</td>
      <td>401.87376</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>13533.310000</td>
      <td>63.957969</td>
      <td>0.0</td>
      <td>3973.4119</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>27.98152</td>
      <td>27860.896398</td>
      <td>2408.721181</td>
      <td>564.836110</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>4188.880198</td>
      <td>6650.0</td>
      <td>481.29776</td>
    </tr>
    <tr>
      <th>2050-06-02 03:00:00</th>
      <td>79.424</td>
      <td>401.87376</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>13533.310000</td>
      <td>63.957969</td>
      <td>0.0</td>
      <td>3973.4119</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>27.98152</td>
      <td>26819.963040</td>
      <td>2884.920531</td>
      <td>37.857281</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>4799.900000</td>
      <td>6650.0</td>
      <td>481.29776</td>
    </tr>
    <tr>
      <th>2050-06-02 04:00:00</th>
      <td>79.424</td>
      <td>401.87376</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>13533.310000</td>
      <td>64.457641</td>
      <td>0.0</td>
      <td>3973.4119</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>24.54648</td>
      <td>26633.462630</td>
      <td>3509.451204</td>
      <td>2149.171063</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>1255.985149</td>
      <td>7700.0</td>
      <td>481.29776</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2050-06-04 19:00:00</th>
      <td>0.000</td>
      <td>0.00000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>488.179185</td>
      <td>0.0</td>
      <td>3810.1210</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>2.38952</td>
      <td>37020.631192</td>
      <td>1807.459332</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>9.656073</td>
      <td>6650.0</td>
      <td>0.00000</td>
    </tr>
    <tr>
      <th>2050-06-04 20:00:00</th>
      <td>79.424</td>
      <td>401.87376</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>9822.540000</td>
      <td>279.816114</td>
      <td>0.0</td>
      <td>3973.4119</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>2.38952</td>
      <td>30863.181413</td>
      <td>1544.824039</td>
      <td>0.000000</td>
      <td>2756.511919</td>
      <td>0.000000</td>
      <td>4799.900000</td>
      <td>7700.0</td>
      <td>481.29776</td>
    </tr>
    <tr>
      <th>2050-06-04 21:00:00</th>
      <td>79.424</td>
      <td>401.87376</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>13533.310000</td>
      <td>98.435312</td>
      <td>0.0</td>
      <td>3973.4119</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>10.81752</td>
      <td>25616.171792</td>
      <td>1913.129886</td>
      <td>4550.914437</td>
      <td>6003.294000</td>
      <td>3905.000000</td>
      <td>4799.900000</td>
      <td>7700.0</td>
      <td>481.29776</td>
    </tr>
    <tr>
      <th>2050-06-04 22:00:00</th>
      <td>79.424</td>
      <td>401.87376</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>13500.822599</td>
      <td>92.938924</td>
      <td>0.0</td>
      <td>3973.4119</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>14.25200</td>
      <td>12542.084700</td>
      <td>2290.852248</td>
      <td>17137.426098</td>
      <td>5948.264381</td>
      <td>3905.000000</td>
      <td>4799.900000</td>
      <td>6650.0</td>
      <td>481.29776</td>
    </tr>
    <tr>
      <th>2050-06-04 23:00:00</th>
      <td>79.424</td>
      <td>401.87376</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>13533.310000</td>
      <td>64.957312</td>
      <td>0.0</td>
      <td>3973.4119</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>14.25200</td>
      <td>10246.527453</td>
      <td>2129.759344</td>
      <td>18098.521590</td>
      <td>6003.294000</td>
      <td>2967.800000</td>
      <td>4799.900000</td>
      <td>7700.0</td>
      <td>481.29776</td>
    </tr>
  </tbody>
</table>
<p>72 rows × 25 columns</p>
</div></div>
</div>
<p>Graph the power output of the different generation types…</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">year</span> <span class="o">&gt;</span> <span class="mi">2020</span><span class="p">:</span>

    <span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Nuclear&quot;</span><span class="p">,</span> <span class="s1">&#39;Biomass&#39;</span><span class="p">,</span> <span class="s2">&quot;Oil&quot;</span><span class="p">,</span> <span class="s2">&quot;Natural Gas&quot;</span><span class="p">,</span>
            <span class="s1">&#39;Hydrogen&#39;</span><span class="p">,</span> <span class="s1">&#39;CCS Gas&#39;</span><span class="p">,</span> <span class="s1">&#39;CCS Biomass&#39;</span><span class="p">,</span>
            <span class="s2">&quot;Pumped Storage Hydroelectric&quot;</span><span class="p">,</span> <span class="s1">&#39;Hydro&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Battery&#39;</span><span class="p">,</span> <span class="s1">&#39;Compressed Air&#39;</span><span class="p">,</span> <span class="s1">&#39;Liquid Air&#39;</span><span class="p">,</span>
            <span class="s2">&quot;Wind Offshore&quot;</span><span class="p">,</span> <span class="s1">&#39;Wind Onshore&#39;</span><span class="p">,</span> <span class="s1">&#39;Solar Photovoltaics&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Interconnectors Import&#39;</span><span class="p">,</span> <span class="s1">&#39;Unmet Load&#39;</span>
            <span class="p">]</span>

<span class="k">else</span><span class="p">:</span>
    <span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Nuclear&quot;</span><span class="p">,</span> <span class="s1">&#39;Biomass&#39;</span><span class="p">,</span>
            <span class="s1">&#39;EfW Incineration&#39;</span><span class="p">,</span>
            <span class="s2">&quot;Coal&quot;</span><span class="p">,</span> <span class="s2">&quot;Oil&quot;</span><span class="p">,</span> <span class="s2">&quot;Natural Gas&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Pumped Storage Hydroelectric&quot;</span><span class="p">,</span> <span class="s1">&#39;Hydro&#39;</span><span class="p">,</span>
            <span class="s2">&quot;Wind Offshore&quot;</span><span class="p">,</span> <span class="s1">&#39;Wind Onshore&#39;</span><span class="p">,</span> <span class="s1">&#39;Solar Photovoltaics&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Interconnectors Import&#39;</span>
            <span class="p">]</span>
<span class="c1"># print(p_by_carrier[&#39;Pumped Storage Hydroelectric&#39;])</span>

<span class="n">p_by_carrier</span> <span class="o">=</span> <span class="n">p_by_carrier</span><span class="p">[</span><span class="n">cols</span><span class="p">]</span>

<span class="n">p_by_carrier</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span>
    <span class="p">(</span><span class="n">p_by_carrier</span><span class="o">.</span><span class="n">max</span><span class="p">()[</span><span class="n">p_by_carrier</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">50.0</span><span class="p">])</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
    <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


<span class="n">colors</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Coal&quot;</span><span class="p">:</span> <span class="s2">&quot;grey&quot;</span><span class="p">,</span>
          <span class="s2">&quot;Diesel/Gas oil&quot;</span><span class="p">:</span> <span class="s2">&quot;black&quot;</span><span class="p">,</span>
          <span class="s2">&quot;Diesel/gas Diesel/Gas oil&quot;</span><span class="p">:</span> <span class="s2">&quot;black&quot;</span><span class="p">,</span>
          <span class="s1">&#39;Oil&#39;</span><span class="p">:</span> <span class="s1">&#39;black&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Unmet Load&#39;</span><span class="p">:</span> <span class="s1">&#39;black&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Anaerobic Digestion&#39;</span><span class="p">:</span> <span class="s1">&#39;green&#39;</span><span class="p">,</span>
          <span class="s1">&#39;EfW Incineration&#39;</span><span class="p">:</span> <span class="s1">&#39;chocolate&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Sewage Sludge Digestion&#39;</span><span class="p">:</span> <span class="s1">&#39;green&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Landfill Gas&#39;</span><span class="p">:</span> <span class="s1">&#39;green&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Biomass (dedicated)&#39;</span><span class="p">:</span> <span class="s1">&#39;green&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Biomass (co-firing)&#39;</span><span class="p">:</span> <span class="s1">&#39;green&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Biomass&#39;</span><span class="p">:</span> <span class="s1">&#39;green&#39;</span><span class="p">,</span>
          <span class="s1">&#39;CCS Biomass&#39;</span><span class="p">:</span> <span class="s1">&#39;darkgreen&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Interconnectors Import&#39;</span><span class="p">:</span> <span class="s1">&#39;pink&#39;</span><span class="p">,</span>
          <span class="s2">&quot;Sour gas&quot;</span><span class="p">:</span> <span class="s2">&quot;lightcoral&quot;</span><span class="p">,</span>
          <span class="s2">&quot;Natural Gas&quot;</span><span class="p">:</span> <span class="s2">&quot;lightcoral&quot;</span><span class="p">,</span>
          <span class="s1">&#39;CCS Gas&#39;</span><span class="p">:</span> <span class="s2">&quot;lightcoral&quot;</span><span class="p">,</span>
          <span class="s1">&#39;Hydrogen&#39;</span><span class="p">:</span> <span class="s2">&quot;lightcoral&quot;</span><span class="p">,</span>
          <span class="s2">&quot;Nuclear&quot;</span><span class="p">:</span> <span class="s2">&quot;orange&quot;</span><span class="p">,</span>
          <span class="s1">&#39;Tidal Barrage and Tidal Stream&#39;</span><span class="p">:</span> <span class="s1">&#39;aqua&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Hydro&#39;</span><span class="p">:</span> <span class="s2">&quot;turquoise&quot;</span><span class="p">,</span>
          <span class="s2">&quot;Large Hydro&quot;</span><span class="p">:</span> <span class="s2">&quot;turquoise&quot;</span><span class="p">,</span>
          <span class="s2">&quot;Small Hydro&quot;</span><span class="p">:</span> <span class="s2">&quot;turquoise&quot;</span><span class="p">,</span>
          <span class="s2">&quot;Pumped Storage Hydroelectric&quot;</span><span class="p">:</span> <span class="s2">&quot;darkturquoise&quot;</span><span class="p">,</span>
          <span class="s1">&#39;Battery&#39;</span><span class="p">:</span> <span class="s1">&#39;lime&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Compressed Air&#39;</span><span class="p">:</span> <span class="s1">&#39;greenyellow&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Liquid Air&#39;</span><span class="p">:</span> <span class="s1">&#39;lawngreen&#39;</span><span class="p">,</span>
          <span class="s2">&quot;Wind Offshore&quot;</span><span class="p">:</span> <span class="s2">&quot;lightskyblue&quot;</span><span class="p">,</span>
          <span class="s1">&#39;Wind Onshore&#39;</span><span class="p">:</span> <span class="s1">&#39;deepskyblue&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Solar Photovoltaics&#39;</span><span class="p">:</span> <span class="s1">&#39;yellow&#39;</span><span class="p">}</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">set_size_inches</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="p">(</span><span class="n">p_by_carrier</span> <span class="o">/</span> <span class="mf">1e3</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
    <span class="n">kind</span><span class="o">=</span><span class="s2">&quot;area&quot;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">color</span><span class="o">=</span><span class="p">[</span><span class="n">colors</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">p_by_carrier</span><span class="o">.</span><span class="n">columns</span><span class="p">])</span>

<span class="c1"># stacked area plot of negative values, prepend column names with &#39;_&#39; such that they don&#39;t appear in the legend</span>
<span class="p">(</span><span class="n">interconnector_export</span> <span class="o">/</span> <span class="mf">1e3</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">area</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">stacked</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.</span><span class="p">)</span>
<span class="c1"># rescale the y axis</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([(</span><span class="n">interconnector_export</span> <span class="o">/</span> <span class="mf">1e3</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="p">(</span><span class="n">p_by_carrier</span> <span class="o">/</span> <span class="mf">1e3</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()])</span>

<span class="c1"># Shrink current axis&#39;s height by 10% on the bottom</span>
<span class="n">box</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_position</span><span class="p">([</span><span class="n">box</span><span class="o">.</span><span class="n">x0</span><span class="p">,</span> <span class="n">box</span><span class="o">.</span><span class="n">y0</span> <span class="o">+</span> <span class="n">box</span><span class="o">.</span><span class="n">height</span> <span class="o">*</span> <span class="mf">0.1</span><span class="p">,</span>
                 <span class="n">box</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">box</span><span class="o">.</span><span class="n">height</span> <span class="o">*</span> <span class="mf">0.9</span><span class="p">])</span>

<span class="c1"># Put a legend below current axis</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper center&#39;</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">),</span>
          <span class="n">fancybox</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">shadow</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;GW&quot;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
c:\Users\alyden\Anaconda3\envs\PyPSA-GB\lib\site-packages\pandas\plotting\_matplotlib\core.py:1391: UserWarning: Attempting to set identical bottom == top == 0.0 results in singular transformations; automatically expanding.
  ax.set_ylim(None, 0)
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Text(0.5, 0, &#39;&#39;)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_6_-_Unit_Commitment_21_2.png" src="../_images/notebooks_6_-_Unit_Commitment_21_2.png" />
</div>
</div>
<p>Graph the pumped hydro dispatch and state of charge…</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">set_size_inches</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>

<span class="n">p_storage</span> <span class="o">=</span> <span class="n">network</span><span class="o">.</span><span class="n">storage_units_t</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">state_of_charge</span> <span class="o">=</span> <span class="n">network</span><span class="o">.</span><span class="n">storage_units_t</span><span class="o">.</span><span class="n">state_of_charge</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">p_storage</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;Pumped hydro dispatch&quot;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">state_of_charge</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;State of charge&quot;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;MWh&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Text(0.5, 0, &#39;&#39;)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_6_-_Unit_Commitment_23_1.png" src="../_images/notebooks_6_-_Unit_Commitment_23_1.png" />
</div>
</div>
<p>Graph the curtailment of onshore wind…</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">carrier</span> <span class="o">=</span> <span class="s2">&quot;Wind Onshore&quot;</span>

<span class="n">capacity</span> <span class="o">=</span> <span class="n">network</span><span class="o">.</span><span class="n">generators</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;carrier&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">carrier</span><span class="p">,</span> <span class="s2">&quot;p_nom&quot;</span><span class="p">]</span>
<span class="n">p_available</span> <span class="o">=</span> <span class="n">network</span><span class="o">.</span><span class="n">generators_t</span><span class="o">.</span><span class="n">p_max_pu</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">generators</span><span class="p">[</span><span class="s2">&quot;p_nom&quot;</span><span class="p">])</span>
<span class="n">p_available_by_carrier</span> <span class="o">=</span> <span class="n">p_available</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">generators</span><span class="o">.</span><span class="n">carrier</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">p_curtailed_by_carrier</span> <span class="o">=</span> <span class="n">p_available_by_carrier</span> <span class="o">-</span> <span class="n">p_by_carrier</span>
<span class="n">p_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="n">carrier</span> <span class="o">+</span> <span class="s2">&quot; available&quot;</span><span class="p">:</span> <span class="n">p_available_by_carrier</span><span class="p">[</span><span class="n">carrier</span><span class="p">],</span>
                     <span class="n">carrier</span> <span class="o">+</span> <span class="s2">&quot; dispatched&quot;</span><span class="p">:</span> <span class="n">p_by_carrier</span><span class="p">[</span><span class="n">carrier</span><span class="p">],</span>
                     <span class="n">carrier</span> <span class="o">+</span> <span class="s2">&quot; curtailed&quot;</span><span class="p">:</span> <span class="n">p_curtailed_by_carrier</span><span class="p">[</span><span class="n">carrier</span><span class="p">]})</span>

<span class="n">p_df</span><span class="p">[</span><span class="n">carrier</span> <span class="o">+</span> <span class="s2">&quot; capacity&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">capacity</span>
<span class="n">p_df</span><span class="p">[</span><span class="s2">&quot;Wind Onshore curtailed&quot;</span><span class="p">][</span><span class="n">p_df</span><span class="p">[</span><span class="s2">&quot;Wind Onshore curtailed&quot;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mf">0.</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">set_size_inches</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">p_df</span><span class="p">[[</span><span class="n">carrier</span> <span class="o">+</span> <span class="s2">&quot; dispatched&quot;</span><span class="p">,</span> <span class="n">carrier</span> <span class="o">+</span> <span class="s2">&quot; curtailed&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s2">&quot;area&quot;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Power [MW]&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.legend.Legend at 0x1d593c16e50&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_6_-_Unit_Commitment_25_1.png" src="../_images/notebooks_6_-_Unit_Commitment_25_1.png" />
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="5d%20-%20Zonal%20Network.html" class="btn btn-neutral float-left" title="LOPF using the Zonal Network" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="9%20-%20Comparison%20To%20Historical%20Data.html" class="btn btn-neutral float-right" title="Comparison To Historical Data" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Andrew Lyden.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>